# Phrase Editor

Веб-інструмент для редагування списків фраз із Tailwind-персоналізацією, Undo/Redo, Web Worker + IndexedDB підтримкою, а також PerformanceTester для оцінки робочого навантаження.

## Основні можливості

- **Текстовий редактор** з віртуалізацією для довгих списків (у налаштуваннях можна вмикати/вимикати режим та автозбереження).
- **Панель операцій** із 20+ трансформаціями (регістрові зміни, обгортки, очищення, сортування, пошук/заміна) + Web Worker обробкою.
- **PerformanceTester** (лінька кнопка поруч з метрикою) запускає серію тестів із 100–50 000 рядків, вимірює час/пам’ять та показує рекомендації.
- **SettingsPanel** у правому нижньому куті відображає статистику кешу (LRU-тіпа реалізація), IndexedDB, версію додатку та дозволяє очищати дані.
- **IndexedDB** зберігає великі тексти (>5 MB), автоматично чистить найстаріші записи при перевищенні 100 MB та відкривається через `indexedDBService`.
- **Operation Cache** (LRU+TTL) повторно використовує результати важких операцій та прискорює повторні виклики via `useDebouncedCallback`.
- **ErrorBoundary** відловлює критичні помилки, зберігає стек у `localStorage` і виводить дружнє UI із діями “Передзавантажити”, “Очистити дані” тощо.
- **PWA-ready**: додано `manifest.json` + `registerServiceWorker` можна увімкнути через `.env.production`.

## Локальна розробка

```bash
npm install
npm run dev
```

Під час роботи відкрийте *PerformanceTester* поруч із метрикою або викликайте клавішу `Settings` для перегляду статистики кешу/IndexedDB.

Щоб виміряти затримку з великими наборами даних, натисніть **“Запустити”** в PerformanceTester: він очищає кеш, вимірює Web Worker обробку, тестує IndexedDB (запис/читання/видалення) і кеш (запис/читання).

## Оцінка продуктивності

- **Virtualization** автоматично підбирається для текстів >1000 рядків, але можна вручну керувати з SettingsPanel.
- **useDebouncedCallback** із внутрішнім кешем гарантує, що повторні обчислення (по рядках + параметрах) не викликають додаткові операції.
- **PerformanceTester** показує загальні здібності: кількість тестів, середній час, швидкість (ряд/мс) та рекомендації.
- **IndexedDB** статистика доступна зі SettingsPanel (записів, розмір, ліміт), можна очистити базу прямо звідти.
- **Кеш** підтримує LRU+TTL, заповнюється за допомогою `operationCache` і очищується у SettingsPanel.

## Побудова та деплой

- Створити продакшен-збірку:

  ```bash
  npm run build
  ```

- Протестувати локально:

  ```bash
  npm run preview
  ```

- **Netlify**: drag & drop папку `dist`.
- **Vercel**: пуш на GitHub (або використовуйте `vercel` CLI для ручного деплою). Для SPA налаштування додано `vercel.json` з rewrite на `index.html`.
- **GitHub Pages**: workflow `.github/workflows/deploy.yml` автоматично будує `npm run build` і пушить `./dist` через `peaceiris/actions-gh-pages@v3`.

### Змінні середовища

Зберігання конфігурації у `.env.production`:

```bash
VITE_APP_NAME="Редактор списку фраз"
VITE_APP_VERSION="1.0.0"
VITE_APP_BUILD_TIME=2024-01-30T12:00:00Z
VITE_API_BASE_URL=/
VITE_ENABLE_SERVICE_WORKER=true
VITE_MAX_TEXT_SIZE=10485760
VITE_ENABLE_INDEXED_DB=true
VITE_CACHE_ENABLED=true
```

> `.env.production` робить додаток PWA-ready (службовий робітник + манифест), включає підтримку IndexedDB і кешування результатів.

## CI/CD та перевірка

- Перевірка `npm run build` має проходити без помилок.
- Виконати `npm run preview` для локальної перевірки саме `dist`.
- CI: `.github/workflows/deploy.yml` запускає `npm ci` → `npm run build` → `peaceiris/actions-gh-pages@v3`.
- Для кращої стабільності перевірте Lighthouse (ціль >90) і час першого візуального відгуку <3 с.
- Розмір бандла має залишатись <500 KB з урахуванням tree-shaking (танцювати зі `vite`).
