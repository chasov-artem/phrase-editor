# Phrase Editor

Веб-інструмент для редагування списків фраз (кожна строчка — окрема фраза) з підтримкою до 10 000 рядків та набором текстових трансформацій.

**Live Demo:** https://phrase-editor-pjxpgctr6-artems-projects-20cd3248.vercel.app/

## Як запустити локально

```bash
# Встановити залежності
npm install

# Запустити dev сервер
npm run dev

# Збілдити для продакшену
npm run build

# Переглянути продакшен збірку локально
npm run preview
```

Відкрийте [http://localhost:5173](http://localhost:5173) у браузері.

## Технології

- **React 19** + **TypeScript** — UI фреймворк
- **Tailwind CSS** — стилізація
- **Zustand** — управління станом
- **Vite** — збірка та dev сервер
- **Web Workers** — обробка великих текстів без блокування UI
- **IndexedDB** — зберігання великих текстів (>5 MB)
- **react-virtuoso** — віртуалізація для відображення довгих списків

## Реалізовані функції

### UI/UX

- ✅ Велике текстове поле (textarea з віртуалізацією для >1000 рядків)
- ✅ Панель операцій з кнопками (зліва)
- ✅ Перегляд результату (перемикання між input/output у тому ж полі)
- ✅ Метрики: кількість рядків, порожніх рядків, слів, символів, час виконання останньої операції
- ✅ Очистити поле
- ✅ Скопіювати результат у буфер
- ✅ Імпорт/експорт .txt файлів (upload/download)

### Операції обробки тексту

#### Регістр

- ✅ Усі великі літери (`uppercase`)
- ✅ Усі малі літери (`lowercase`)
- ✅ Кожне слово з великої літери (`title_case`)
- ✅ Лише перше слово з великої літери (`sentence_case`)

#### Символи / обрамлення

- ✅ Додати + перед кожним словом (`add_plus_prefix`)
- ✅ Видалити + перед словами (`remove_plus_prefix`)
- ✅ Додати лапки навколо рядка (`add_quotes`)
- ✅ Додати квадратні дужки навколо рядка (`add_brackets`)
- ✅ Додати - на початок рядка (`add_dash_prefix`)
- ✅ -[...] на початку (`add_dash_brackets_prefix`)
- ✅ -"..." на початку (`add_dash_quotes_prefix`)

#### Очищення

- ✅ Видалити зайві пробіли (`trim_spaces`)
- ✅ Видалити табуляцію (`remove_tabs`)
- ✅ Видалити все праворуч після " -" (`remove_after_dash`)
- ✅ Замінити пробіли на \_ (`replace_spaces_with_underscore`)
- ✅ Видалити спецсимволи (`remove_special_chars`)
- ✅ Замінити спецсимволи на пробіли (`replace_special_chars_with_spaces`)

#### Пошук/заміна

- ✅ Два поля: find і replace
- ✅ Заміна по всіх рядках
- ✅ Підтримка regex (опціонально)
- ✅ Case sensitive опція

#### Сортування та унікальність

- ✅ Сортувати рядки А-Я (`sort_asc`) з підтримкою локалі uk-UA через `localeCompare`
- ✅ Сортувати рядки Я-А (`sort_desc`)
- ✅ Видалити дублікати рядків (`remove_duplicates`)
- ✅ Видалити порожні рядки (`remove_empty_lines`)

### Історія дій (Undo/Redo)

- ✅ Undo/Redo на необмежену кількість кроків (реалізовано через масив історії)
- ✅ Крок = одне натискання операції або застосування пошуку/заміни
- ✅ Після Undo і виконання нової операції — redo-гілка скидається (як у звичайних редакторах)
- ✅ Історія зберігається в пам'яті, автоматично очищається при нових операціях після undo

## Рішення щодо продуктивності

### Web Workers

Всі операції обробки тексту виконуються в окремому Web Worker (`src/workers/text.worker.ts`), що запобігає блокуванню UI навіть при обробці 10 000+ рядків.

**Батчинг:**

- Операції, що обробляються по рядках, розбиваються на батчі по 1000 рядків
- Прогрес відображається в реальному часі через `postMessage`
- Користувач бачить індикатор прогресу під час обробки

**Приклад:**

```typescript
// Операції виконуються батчами по 1000 рядків
const batchSize = 1000;
const batches = Math.ceil(lines.length / batchSize);
for (let batchIndex = 0; batchIndex < batches; batchIndex++) {
  // Обробка батчу
  // Відправка прогресу
}
```

### Віртуалізація рендерингу

Для текстів >1000 рядків автоматично вмикається віртуалізація через `react-virtuoso`:

- Рендериться тільки видима частина тексту
- Прокрутка працює плавно навіть з 50 000+ рядками
- Можна вручну керувати через Settings Panel

### Кешування операцій

**LRU Cache з TTL** (`src/utils/cache.ts`):

- Зберігає результати важких операцій (сортування, видалення дублікатів)
- Автоматично очищає старі записи
- Прискорює повторні виклики з тими самими даними

**Debouncing:**

- Оновлення метрик та збереження стану відбувається з затримкою 500ms
- Зменшує кількість операцій при швидкому введенні тексту

### IndexedDB для великих текстів

- Тексти >5 MB автоматично зберігаються в IndexedDB
- Автоматичне очищення найстаріших записів при перевищенні 100 MB
- Швидкий доступ до збережених текстів

### Оптимізація рендерингу

- Використання `useMemo` для обчислення метрик
- Умовний рендеринг (не рендеримо таблицю, якщо немає даних)
- Мінімізація ре-рендерів через правильне використання Zustand

## Архітектура

### Структура проекту

```
src/
├── components/          # Загальні компоненти (ErrorBoundary, PerformanceTester, SettingsPanel)
├── features/            # Функціональні модулі
│   ├── Metrics/         # Панель метрик
│   ├── Operations/      # Панель операцій та кнопки
│   └── TextEditor/      # Текстовий редактор з віртуалізацією
├── hooks/               # Кастомні хуки (useDebouncedCallback, useTextWorker)
├── providers/           # React провайдери (PerformanceProvider)
├── store/               # Zustand store (useStore.ts)
├── types/               # TypeScript типи
├── utils/               # Утиліти
│   ├── cache.ts         # LRU кеш операцій
│   ├── indexedDB.ts     # IndexedDB сервіс
│   ├── localStorage.ts  # LocalStorage сервіс
│   ├── textOperations.ts        # Базові операції
│   ├── textOperationsExtended.ts # Розширені операції
│   └── operationsConfig.ts      # Конфігурація операцій
└── workers/             # Web Workers
    └── text.worker.ts   # Worker для обробки текстів
```

### Управління станом

**Zustand Store** (`src/store/useStore.ts`):

- Централізоване управління станом додатку
- Історія операцій (undo/redo)
- Метрики тексту та операцій
- Налаштування (віртуалізація, автозбереження)

### Обробка помилок

**ErrorBoundary** (`src/components/ErrorBoundary.tsx`):

- Відловлює критичні помилки React
- Зберігає стек помилок у localStorage
- Показує дружнє UI з опціями відновлення

## Деплой

### Vercel

Проект налаштований для деплою на Vercel:

- `vercel.json` містить конфігурацію для SPA routing
- Автоматичний деплой при push на GitHub
- Build command: `npm run build`
- Output directory: `dist`

### GitHub Pages

Workflow `.github/workflows/deploy.yml` автоматично:

1. Встановлює залежності (`npm ci`)
2. Білдить проект (`npm run build`)
3. Деплоїть через `peaceiris/actions-gh-pages@v3`

### Netlify

Можна використати drag & drop папки `dist` або налаштувати автоматичний деплой з GitHub.

## Що не встигли / Що б покращили

### Покращення, які можна додати:

1. **Експорт в інші формати:**

   - CSV
   - JSON
   - Excel

2. **Додаткові операції:**

   - Об'єднання рядків з роздільником
   - Розбиття рядків за роздільником
   - Нумерація рядків
   - Фільтрація рядків за умовою

3. **Покращення UX:**

   - Гарячі клавіші для операцій
   - Drag & drop файлів
   - Автозбереження в реальному часі з конфлікт-резолвінгом
   - Темна тема (вже є, але можна покращити)

4. **Продуктивність:**

   - Streaming обробка для дуже великих файлів (>100 MB)
   - WebAssembly для критичних операцій
   - Service Worker для офлайн роботи

5. **Тестування:**

   - Unit тести для операцій
   - E2E тести для критичних сценаріїв
   - Performance тести (вже є PerformanceTester, але можна автоматизувати)

6. **Документація:**
   - Детальна документація API
   - Приклади використання
   - Відео-туторіал

## Ліцензія

MIT

## Автор

Chasov Artem
